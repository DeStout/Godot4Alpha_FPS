[gd_scene load_steps=17 format=3 uid="uid://bjj5lhs05lts1"]

[ext_resource type="PackedScene" uid="uid://dv03ifqueqduo" path="res://Characters/Player.tscn" id="1_7d36r"]
[ext_resource type="PackedScene" uid="uid://bidcwajhcrj40" path="res://Characters/TestEnemy.tscn" id="2_16qsl"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_a5b8r"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_leomj"]
sky_material = SubResource("ProceduralSkyMaterial_a5b8r")
process_mode = 1
radiance_size = 5

[sub_resource type="Environment" id="Environment_xhtq5"]
background_mode = 2
background_energy_multiplier = 0.5
sky = SubResource("Sky_leomj")
tonemap_mode = 3
tonemap_exposure = 1.4
ssao_enabled = true
sdfgi_enabled = true
glow_enabled = true
fog_enabled = true
fog_density = 0.0632
fog_aerial_perspective = 0.475

[sub_resource type="NavigationMesh" id="NavigationMesh_k65o3"]

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_7aetu"]

[sub_resource type="PlaneMesh" id="PlaneMesh_241ub"]
size = Vector2(100, 100)

[sub_resource type="SkeletonModification3DLookAt" id="SkeletonModification3DLookAt_ba3uu"]
resource_local_to_scene = true
execution_mode = 1
bone_name = "Chest"
bone_index = 2
target_nodepath = NodePath("../../PlayerSeent/Target")
additional_rotation = Vector3(90, 180, 0)

[sub_resource type="SkeletonModificationStack3D" id="SkeletonModificationStack3D_45hu7"]
resource_local_to_scene = true
enabled = true
strength = 0.9
modification_count = 1
modifications/0 = SubResource("SkeletonModification3DLookAt_ba3uu")

[sub_resource type="SkeletonModification3DStackHolder" id="SkeletonModification3DStackHolder_e3f2g"]
resource_local_to_scene = true
execution_mode = 1
held_modification_stack = SubResource("SkeletonModificationStack3D_45hu7")

[sub_resource type="SkeletonModification3DLookAt" id="SkeletonModification3DLookAt_cakyy"]
resource_local_to_scene = true
execution_mode = 1
bone_name = "Neck2"
bone_index = 4
target_nodepath = NodePath("../../PlayerSeent/Target")
additional_rotation = Vector3(90, 180, 0)

[sub_resource type="SkeletonModification3DLookAt" id="SkeletonModification3DLookAt_fv05v"]
resource_local_to_scene = true
execution_mode = 1
bone_name = "Head"
bone_index = 5
target_nodepath = NodePath("../../PlayerSeent/Target")
additional_rotation = Vector3(90, 180, 0)

[sub_resource type="SkeletonModificationStack3D" id="SkeletonModificationStack3D_cpkc0"]
resource_local_to_scene = true
enabled = true
strength = 0.5
modification_count = 2
modifications/0 = SubResource("SkeletonModification3DLookAt_cakyy")
modifications/1 = SubResource("SkeletonModification3DLookAt_fv05v")

[sub_resource type="SkeletonModification3DStackHolder" id="SkeletonModification3DStackHolder_76mpp"]
resource_local_to_scene = true
execution_mode = 1
held_modification_stack = SubResource("SkeletonModificationStack3D_cpkc0")

[sub_resource type="SkeletonModificationStack3D" id="SkeletonModificationStack3D_7onqo"]
resource_local_to_scene = true
enabled = true
modification_count = 2
modifications/0 = SubResource("SkeletonModification3DStackHolder_e3f2g")
modifications/1 = SubResource("SkeletonModification3DStackHolder_76mpp")

[node name="TestLevel" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_xhtq5")

[node name="DirectionalLight3d" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.826098, -0.359205, 0.434204, -1.49012e-08, 0.770513, 0.637424, -0.563526, 0.526575, -0.63652, 0, 0, 0)
light_color = Color(1, 0.917647, 0.784314, 1)
light_energy = 0.5
light_indirect_energy = 0.5
light_volumetric_fog_energy = 0.5
shadow_enabled = true

[node name="Level" type="Node3D" parent="."]

[node name="NavigationRegion3d" type="NavigationRegion3D" parent="Level"]
navmesh = SubResource("NavigationMesh_k65o3")

[node name="World" type="StaticBody3D" parent="Level/NavigationRegion3d"]
collision_mask = 6

[node name="CollisionShape3d" type="CollisionShape3D" parent="Level/NavigationRegion3d/World"]
shape = SubResource("WorldBoundaryShape3D_7aetu")

[node name="MeshInstance3d" type="MeshInstance3D" parent="Level/NavigationRegion3d"]
mesh = SubResource("PlaneMesh_241ub")

[node name="Player" parent="." instance=ExtResource("1_7d36r")]

[node name="TestEnemy" parent="." instance=ExtResource("2_16qsl")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, -4.96514)

[node name="Skeleton3D" parent="TestEnemy/Puppet" index="0"]
bones/1/position = Vector3(3.14813e-09, 0.864372, -0.0641973)
bones/1/rotation = Quaternion(2.89313e-08, 0.987396, -0.15827, -1.92464e-07)
bones/2/rotation = Quaternion(-0.143007, 0.00110428, 0.00326224, 0.989716)
bones/4/rotation = Quaternion(0.0941535, 0.0133542, 0.0187526, 0.995291)
bones/5/rotation = Quaternion(0.00969157, 0.000771693, -0.000660334, 0.999953)
bones/7/rotation = Quaternion(0.577002, -0.21204, -0.64395, 0.455451)
bones/8/rotation = Quaternion(0.2669, 0.0351251, -0.0519689, 0.961681)
bones/10/rotation = Quaternion(0.417301, 0.283219, 0.692356, 0.516033)
bones/11/rotation = Quaternion(0.488005, -0.0316696, 0.0950208, 0.867075)
bones/12/position = Vector3(-0.0208816, 0.34335, 0.32245)
bones/12/rotation = Quaternion(-0.456824, -0.202241, -0.535599, 0.680841)
bones/15/rotation = Quaternion(-0.136752, -0.0311937, 0.100512, 0.984999)
bones/16/rotation = Quaternion(-0.352684, -0.0473181, -0.50171, 0.788455)
bones/21/rotation = Quaternion(0.00413199, -0.168782, -0.154747, 0.973421)
bones/22/rotation = Quaternion(-0.394365, 0.0948887, -0.480339, 0.777655)
bones/27/rotation = Quaternion(-0.105765, -0.0530162, -0.0569688, 0.991341)
bones/28/rotation = Quaternion(0.537159, 0.31315, -0.157603, 0.767176)
bones/29/rotation = Quaternion(0.477564, 0.222495, -0.204586, 0.824969)
bones/30/position = Vector3(-0.0491635, 0.352682, 0.315788)
bones/30/rotation = Quaternion(-0.460201, 0.0658757, 0.472478, 0.74876)
bones/33/rotation = Quaternion(-0.244851, 0.183849, 0.0430019, 0.950999)
bones/34/rotation = Quaternion(-0.38701, -0.00258387, 0.473995, 0.790914)
bones/39/rotation = Quaternion(-0.0280185, 0.194239, 0.268623, 0.943042)
bones/40/rotation = Quaternion(-0.46123, -0.0717648, 0.471175, 0.748405)
bones/45/rotation = Quaternion(-0.209561, -0.246504, 0.40331, 0.855956)
bones/46/rotation = Quaternion(-0.192185, -0.558427, 0.806981, -0.00248244)
bones/47/rotation = Quaternion(0.137686, 0.385775, -0.75939, 0.505517)
bones/49/rotation = Quaternion(-0.524947, 0.137391, -0.224573, 0.809396)
bones/50/rotation = Quaternion(-0.370152, 0.0028822, 0.567105, 0.735779)
bones/52/rotation = Quaternion(-0.421076, 0.160139, 0.506279, 0.735345)
bones/53/rotation = Quaternion(-0.122568, -0.00381787, -0.187786, 0.974525)
bones/54/position = Vector3(-0.125221, 0.434725, 0.353632)
bones/54/rotation = Quaternion(0.0916914, -0.627057, -0.0651931, 0.770806)
bones/56/rotation = Quaternion(-0.0306843, -0.000614969, -0.0280541, 0.999135)
bones/60/rotation = Quaternion(0.565929, -0.423939, -0.423939, 0.565929)
bones/61/position = Vector3(0.11946, 0.190936, -0.459152)
bones/61/rotation = Quaternion(0.719121, 0.216905, 0.615084, 0.239769)
bones/63/rotation = Quaternion(0.153501, 0.0407436, 0.584912, 0.795396)
bones/67/rotation = Quaternion(0.565929, 0.423939, 0.423939, 0.565929)
modification_stack = SubResource("SkeletonModificationStack3D_7onqo")

[node name="BoneAttachment3d" parent="TestEnemy/Puppet" index="3"]
transform = Transform3D(0.844129, 0.327062, 0.424825, -0.481486, 0.113908, 0.86902, 0.235832, -0.938113, 0.253629, 0.0493789, 1.47295, -0.476643)

[node name="BehaviorMachine" parent="TestEnemy" index="6"]
initial_state = NodePath("Idle")

[connection signal="transitioned" from="TestEnemy/BehaviorMachine" to="TestEnemy" method="_state_transitioned"]

[editable path="TestEnemy"]
[editable path="TestEnemy/Puppet"]
